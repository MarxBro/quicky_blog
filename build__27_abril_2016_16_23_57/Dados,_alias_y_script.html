<!doctype html><head><meta name="author" content="MarxBro"><meta name="description" content="Blog personal acerca de linux, perl, tecnologías libres y la mar en coche."><meta name="keywords" content="perl, hack, tecnologia, vim, linux, git, libre, español, administrador, web, redes, free, programación, coding, cool, pi"><link rel="shortcut icon" href="favicon.ico"/>
<link rel="stylesheet" type="text/css" href="css/coso.css">
<meta name="keywords" content="Dados,,alias,script">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
</head><body>
<div><a href="index.html">Volver</a></div><h1>Dados, alias y script</h1>

<p>Los dados son muy viejos y sus orígenes inciertos; la evidencia más antigua que
 tenemos de ellos se remonta a la antiquísima ciudad de Ur (Sumeria creo que se
 le dice a esa zona de Iraq).</p>

<p>Para los detalles, está wikipedia...</p>

<p>Me interesa la idea de traer los dados a la consola: ese es nuestro tema de hoy.</p>

<h2>La idea principal</h2>

<p>Para obtener un número aleatorio entre 1 y 6, en la consola hay varias formas.</p>

<p>Entiendo que la más feliz es la que sigue, ya que no necesita lenguajes
 adicionales :</p>

<pre><code>echo $[RANDOM%6+1]
</code></pre>

<h2>Un poco de ayuda de perl</h2>

<p>Con la ayuda de perl, podemos conseguir que repita una letra <em>X cantidad de
 veces</em>, acorde a la función random anterior... Ya se va pareciendo mas:</p>

<pre><code>perl -E "say ' o 'x $_" $(echo $[RANDOM%6+1] )
</code></pre>

<h2>Un alias</h2>

<p>Lo dicho antes, se puede convertir en alias muy facilmente:</p>

<pre><code>alias dado       = 'echo $[RANDOM%6+1]'
</code></pre>

<h2>Más elaborado: ahora con interfaz</h2>

<p>Este ejemplo que sigue, es interesante ya que propone una idea que no habíamos
 considerado hasta ahora: una interfaz.</p>

<p>No hay nada nuevo en la idea, ni nada complejo, pero la experiencia de tirar un
 dado es <em>un poco mas que conseguir el número que retorna como resultado</em>.</p>

<p>El ejemplo salió de un libro (creo), que en su momento anoté en mi <em>vimwiki</em>
 para después olvidarme del nombre. :P</p>

<p>No me acuerdo cual era, pero como es fácil de entender y divertido, me animo a
 poner el código fuente a continuación:</p>

<pre><code>#!/bin/bash
pip=o                      ## character to use for the pips 
p0="       "               ## blank line 
p1=" $pip     "            ## one pip at the left 
p2="   $pip   "            ## one pipe in the middle of the line 
p3="     $pip "            ## one pip at the right 
p4=" $pip   $pip "         ## two pips 
p5=" $pip $pip $pip "      ## three pips 

cs=$'\e7'                  ## save cursor position 
cr=$'\e8'                  ## restore cursor position 
dn=$'\e[B'                 ## move down 1 line 
b=$'\e[1m'                 ## set bold attribute 
cu_put='\e[%d;%dH'         ## format string to position cursor 
fgbg='\e[3%d;4%dm'         ## format string to set colors 

dice=( 
  ## dice with values 1 to 6 (array elements 0 to 5) 
  "$b$cs$p0$cr$dn$cs$p0$cr$dn$cs$p2$cr$dn$cs$p0$cr$dn$p0" 
  "$b$cs$p0$cr$dn$cs$p1$cr$dn$cs$p0$cr$dn$cs$p3$cr$dn$p0" 
  "$b$cs$p0$cr$dn$cs$p1$cr$dn$cs$p2$cr$dn$cs$p3$cr$dn$p0" 
  "$b$cs$p0$cr$dn$cs$p4$cr$dn$cs$p0$cr$dn$cs$p4$cr$dn$p0" 
  "$b$cs$p0$cr$dn$cs$p4$cr$dn$cs$p2$cr$dn$cs$p4$cr$dn$p0" 
  "$b$cs$p0$cr$dn$cs$p5$cr$dn$cs$p0$cr$dn$cs$p5$cr$dn$p0" 
  ) 

clear 
printf "$cu_put" 2 5               ## position cursor 
printf "$fgbg" 7 0                 ## white on black 
printf "%s\n" "${dice[RANDOM%6]}"  ## print random die 

printf "$cu_put" 2 20              ## position cursor 
printf "$fgbg" 0 3                 ## black on yellow 
printf "%s\n" "${dice[RANDOM%6]}"  ## print random die 
</code></pre>

<p>El array de líneas <em>dice</em>, guarda el resultado que "dibuja" las caras de los dos
 dados y la parte aleatoria, viene dada por la variable <em>RANDOM</em> de bash: tanto
 nuestro simple alias como este ejemplo mas complejo (y no tanto), están
 alimentados y reposan sobre el mismo método para obtener números aleatorios.</p>


<div id="disqus_thread"></div><script>
    var disqus_config = function () {
        this.page.url = 'https://3456.com.ar/Dados,_alias_y_script.html';
        this.page.identifier = '"3456-Dados,_alias_y_script"';
    };
    (function() { 
        var d = document, s = d.createElement("script");
        s.src = "https://3456.disqus.com/embed.js"; 
        s.setAttribute("data-timestamp", +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>JavaScript es necesario para ver los <a href="https://disqus.com/?ref_noscript" rel="nofollow">comentarios.</a></noscript>
<div><a href="index.html">Volver</a></div><span>Última modificación: 27-abril-2016 16:23 by <strong>MarxBro</strong>.<a href="http://www.wtfpl.net/"><img src="/data/wtfpl.png" alt="MarxBro. WTFPL-2016" /></a></span></body></html>